<!DOCTYPE html>
<html>
<head>
  		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Create a Session</title>
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

		<!-- jQuery library -->
		<script src = "https://code.jquery.com/jquery-1.10.2.js"></script>


   		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    	<script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
		<!-- Latest compiled JavaScript -->


		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
    
   		<!-- timepicker -->
    	<script src="jquery.timepicker.min.js"></script>
    	<link rel="stylesheet" href="jquery.timepicker.css">
    	
    	<!-- Autocomplete -->
		<link rel="stylesheet" type="text/css" href="css/brainchain.css">
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-typeahead/2.10.4/jquery.typeahead.js"></script>
		
    	<link rel="stylesheet" type="text/css" href="css/brainchain.css">
		<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	    <script>
	    $( function() {
	      $( "#datepicker" ).datepicker();
	    } );
	    </script>
	    <script>
	    $( function() {
	      $( "#time" ).timepicker({ 'scrollDefault': 'now',
	       'step': 15 });
	    } );
	    </script>
	    <script>
	   $( function() {    
	        var classes = [];
	        var s = "/get_class_list";
	      $.getJSON(s, function(data) {
	        for(var i = 0; i < data.length; i++) {
	          var full_name = data[i].code;
	          full_name += ":";
	          full_name += data[i].title;
	          classes.push(full_name);
	        }
	      });
	        $( "#classname" ).autocomplete({  
	          source: classes
	        });
	      });
	  </script>
	  <script>
	  $( function() {
	    var availableTagsLoc = [
	     "SciLi",
	     "Rockefeller Library",
	     "CIT",
	     "John Hay Library",
	     "Barus And Holley",
	     "Faunce"
	    ];
	    $("#location").autocomplete({
	      source: availableTagsLoc
	    });
	  } );
	  </script>
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<a href="/" class="navbar-left"><img id="logo" src="Brain_Chain-04.png"></a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item">
					<a class="nav-link" href="/">Find a Session <span class="sr-only">(current)</span></a>
				</li>
				<li class="nav-item active">
					<a class="nav-link" href="/session">Create a Session </a>
				</li>
        <li class = "nav-item">
          <a id="mySessions" class="nav-link" href=""></a>
        </li>
			   <li class="nav-item">
				<a class="nav-link" href="/aboutus">About BrainChain </a>
			   </li>
			</ul>
			<ul class= "navbar-nav ml-auto">
				<li class = "nav-item">
					<a id="myProfile" class="nav-link" href=""></a>
				</li>
				<li id = "logout" class= "nav-item">
					<a class="nav-link" href="/logout">Logout </a>
				</li>
			</ul>
		</div>
	</nav>
  <div class="container-fluid no-padding">
    <div class="row justify-content-center" id="image">
      <h1 id = "main-text"><i>Create A Session</i><h1>
    </div>
  </div>
  <div class="container-fluid">
    <div class="row justify-content-center">
        <div class='col-md-6'>
            
  <form id="filters" align="center">
  <div class="form-group">
    <label for="classname">Class Name</label>
    <input id="classname" class="form-control" name="Class Name" type="text" placeholder="ex: CSCI 1420">
  </div>
  <div class="form-group">
    <label for="professor">Professor</label>
    <input id="professor" class="form-control" name="Professor" type="text" placeholder="ex: Prof. Reiss">
  </div>
  <div class="form-group">
    <label for="datepicker">Date</label>
    <input readonly class="form-control" type="text" id="datepicker" style="background: transparent;">
  </div>
  <div class="form-group">
    <label for="time">Time</label>
    <input class="form-control" type="text" id="time" maxlength="7">
  </div>
  <div class="form-group">
    <label for="purpose">Purpose</label>
    <input class="form-control" type="text" id="purpose" name="Purpose" placeholder="ex: Studying for midterm">
  </div>
  <div class="form-group">
    <label for="location">Location</label>
    <input class="form-control" id="location" name="Location" type="text" placeholder="ex: SciLi">
  </div>
  <div class="form-group">
    <label for="location">Floor/Room</label>
    <input class="form-control" id="floorRoom" name="Floor-Room" type="text" placeholder="ex: 4th floor Room 401">
  </div>
  <div class="form-group">
    <label for="notes">Notes (optional)</label>
    <input class="form-control" id="notes" name="Notes" type="text" placeholder="ex: Bring food">
  </div>
  <div class="form-group">
    <input id="submit button" type="submit" value="Submit">
  </div>
  </form>
  </div>
  </div>
  </div>
    <script type="text/javascript">
    $('#filters').submit(submit);
    function submit(e){
      e.preventDefault();
	  if($("#classname").val() === "" || $("#purpose").val() === "" || $("#time").val() === "" || $("#datepicker").val() === "" || $("#professor").val() === ""
		|| $("#location").val() === "" || $("#floorRoom").val() === "") {
		alert("Missing fields");
	  } else {
		  $.post('/createSession', {classname: $("#classname").val(), time: $("#time").val(), datepicker: $("#datepicker").val(), professor: $("#professor").val(), loc: $("#location").val(), floorRoom: $("#floorRoom").val(), purpose: $("#purpose").val(), notes: $("#notes").val()}, function(error, data){
			if(error){
			  console.log("error"); 
			}
		  });
		  window.location.href = "/mysessions";
		}
    }
  </script>
  <script type="text/javascript">
  	$.getJSON("/check_logged_in", function(data){
				var check=data.loggedIn;
				if(check==false){
					window.location.href = "/login";
					//document.getElementById("myProfile").innerHTML="Login/Sign Up";
					//document.getElementById("myProfile").href = "/login.html";
				}
				else{
					document.getElementById("myProfile").innerHTML="My profile";
					document.getElementById("myProfile").href = "/myprofile";
          document.getElementById("mySessions").innerHTML="My Sessions";
          document.getElementById("mySessions").href = "/mysessions";
				}
			});
  </script>
	
</body>
</html>
